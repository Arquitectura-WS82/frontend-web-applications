<app-header-c></app-header-c>

<h1>Request Service</h1>

<form class="card" [formGroup]="requestServiceForm">
  <div class="column col-main">
    <mat-form-field>
      <mat-label>Street From</mat-label>
      <input matInput formControlName="streetFrom" type="text" />
    </mat-form-field>

    <mat-form-field>
      <input
        matInput
        type="text"
        placeholder="District From"
        formControlName="districtFrom"
        [matAutocomplete]="autoDistrictFrom"
      />
      <mat-autocomplete
        #autoDistrictFrom="matAutocomplete"
        [displayWith]="displayFn"
      >
        <mat-option
          *ngFor="let district of filteredDistrictsFrom | async"
          [value]="district"
        >
          {{ district.name }} - {{ district.province.name }}</mat-option
        >
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Street To</mat-label>
      <input matInput formControlName="streetTo" type="text" />
    </mat-form-field>

    <mat-form-field>
      <input
        matInput
        type="text"
        placeholder="District To"
        formControlName="districtTo"
        [matAutocomplete]="autoDistrictTo"
      />
      <mat-autocomplete
        #autoDistrictTo="matAutocomplete"
        [displayWith]="displayFn"
      >
        <mat-option
          *ngFor="let district of filteredDistrictsTo | async"
          [value]="district"
        >
          {{ district.name }} - {{ district.province.name }}</mat-option
        >
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Date (mm/dd/yyyy)</mat-label>
      <input
        matInput
        [min] = "minDate"
        [matDatepicker]="picker"
        formControlName="date"
        readonly
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Type of service</mat-label>
      <mat-select formControlName="typeofService">
        <mat-option value="commercial"> Commercial </mat-option>
        <mat-option value="tourism"> Tourism </mat-option>
        <mat-option value="private"> Private </mat-option>
        <mat-option value="moving"> Moving </mat-option>
        <mat-option value="heavy load"> Heavy load </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field
      *ngIf="
        requestServiceForm.get('typeofService')?.value == 'commercial' ||
        requestServiceForm.get('typeofService')?.value == 'heavy load'
      "
    >
      <mat-label>Weight (Kg)</mat-label>
      <input matInput formControlName="quantity" type="number" />
    </mat-form-field>

    <mat-form-field
      *ngIf="
        requestServiceForm.get('typeofService')?.value == 'private' ||
        requestServiceForm.get('typeofService')?.value == 'tourism'
      "
    >
      <mat-label>People</mat-label>
      <input matInput formControlName="quantity" type="number" />
    </mat-form-field>

    <mat-form-field
      *ngIf="requestServiceForm.get('typeofService')?.value == 'moving'"
    >
      <mat-label>Number of boxes</mat-label>
      <input matInput formControlName="quantity" type="number" />
    </mat-form-field>
  </div>

  <div class="column col-main">
    <div class="row">
      <mat-form-field class="r-time">
        <mat-label>Time (start)</mat-label>
        <input matInput formControlName="timeArrival" type="time" />
      </mat-form-field>

      <strong class="guion"> - </strong>

      <mat-form-field class="r-time">
        <mat-label>Time (finish)</mat-label>
        <input matInput formControlName="timeDeparture" type="time" />
      </mat-form-field>
    </div>

    <mat-form-field>
      <mat-label>Amount (S/.)</mat-label>
      <input matInput formControlName="amount" type="number" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Subject</mat-label>
      <input matInput formControlName="subject" type="text" />
    </mat-form-field>

    <mat-form-field>
      <textarea
        type="text"
        matInput
        rows="7"
        placeholder="Type a description"
        formControlName="description"
      >
      </textarea>
    </mat-form-field>

    <button
      mat-raised-button
      [disabled]="!requestServiceForm.valid"
      color="accent"
      (click)="registerOffer()"
    >
      Submit
    </button>
  </div>
</form>

<app-footers></app-footers>
